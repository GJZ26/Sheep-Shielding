var n=Object.defineProperty;var p=(s,r,h)=>r in s?n(s,r,{enumerable:!0,configurable:!0,writable:!0,value:h}):s[r]=h;var d=(s,r,h)=>p(s,typeof r!="symbol"?r+"":r,h);(function(){"use strict";class s{constructor(o,i,a){d(this,"_width");d(this,"_height");d(this,"_followingType");console.info("ðŸŽ¥ Creating a new camera"),this._width=o,this._height=i,this._followingType=a}capture(o){const i=this._findFollowingEntity(o),a=i.x+i.width/2-this._width/2,c=i.y+i.height/2-this._height/2,e={left:i.x+i.width/2-this._width/2,right:i.x+i.width/2+this._width/2,top:i.y+i.height/2-this._height/2,bottom:i.y+i.height/2+this._height/2};return o.map(t=>{if(!(e.right<t.x||e.left>t.x+t.width||e.bottom<t.y||e.top>t.y+t.height))return{...t,x:t.x-a,y:t.y-c};if(t.type==="wall"||t.type==="bullet"||t.type==="backgroundActive"||t.type==="backgroundInactive"||t.type==="generic")return null;const l=25,g=5;return{id:t.id,x:t.x>e.right?e.right-l-a-g:t.x<e.left-l?e.left-a+g:t.x+t.width/2-a,y:t.y>e.bottom?e.bottom-l-c-g:t.y<e.top-l?e.top-c+g:t.y+t.height/2-c,width:l,height:l,color:t.color,type:"bubble",canonical_position:{x:0,y:0},angle:0,status:"freeze",lives:0}}).filter(t=>t!==null)}resize(o,i){this._width=o,this._height=i}_findFollowingEntity(o){for(let i of o)if(i.type===this._followingType)return i;return o[o.length-1]}}console.info("âš™ï¸ Camera Worker Up");const r=new s(0,0,"player");self.onmessage=h=>{if(h.data.type==="resize"){const{width:o,height:i}=h.data.dimension;r.resize(o,i)}h.data.type==="renderFrame"&&self.postMessage({type:"render",params:[r.capture(h.data.params[0]),h.data.params[1]]})}})();
