var k=Object.defineProperty;var C=(d,e,t)=>e in d?k(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var i=(d,e,t)=>C(d,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();class p{constructor(e,t,s,a){i(this,"_id","dump");i(this,"_x",0);i(this,"_y",0);i(this,"_width",80);i(this,"_height",80);i(this,"_speed",5);i(this,"_sprintIncrement",1.4);i(this,"_debugColor","white");i(this,"_type","generic");i(this,"_angle",0);i(this,"_status","freeze");i(this,"_lives",3);i(this,"_attackCountDown",1e3);i(this,"_initialLives",this._lives);i(this,"_regenerationCountDown",1e3*1);i(this,"_lastAttack",-1);i(this,"_lastRegeneration",-1);this._id=p.generateID(),this._x=e||this._x,this._y=t||this._y,this._width=s||this._width,this._height=a||this._height}static generateID(){return"10000000".replace(/[018]/g,e=>(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16))}static radToDegreeFixed(e){let t=e*180/Math.PI;return t=t%360,t<0&&(t+=360),t}static calculateAngleFrom(e,t,s=!1){return Math.atan2(e.y-t.y,e.x-t.x)+(s?1.5708:-1.5708)}get id(){return this._id}get x(){return this._x}get y(){return this._y}get center_x(){return this._x+this._width/2}get center_y(){return this._y+this._height/2}get data(){return{id:this._id,x:this._x,y:this._y,width:this._width,height:this._height,color:this._debugColor,type:this._type,canonical_position:{x:this.center_x,y:this.center_y},angle:this._angle,status:this._status,lives:this._lives}}get type(){return this._type}get status(){return this._status}get height(){return this._height}get width(){return this._width}get isAlive(){return this._status!=="dead"}hurt(e){this._lives>0&&this._lives--,this._lives<=0&&(this._status="dead")}relocate(e,t){this._x=e,this._y=t}_move(){this._status==="freeze"||this._status==="dead"||(this._x=this._x+this._speed*(this._status==="running"?this._sprintIncrement:1)*Math.sin(this._angle),this._y=this._y+this._speed*(this._status==="running"?this._sprintIncrement:1)*Math.cos(this._angle-2*(90*Math.PI/180)))}_turn(e,t=!0){this._angle=Math.atan2(this._y-e.y,this._x-e.x)+(t?1.5708:-1.5708)}_positionOfNearestEntity(e){let t=Number.POSITIVE_INFINITY,s=e.reduce((a,r)=>{const n=Math.sqrt(Math.pow(this._x+this._width/2-r.center_x,2)+Math.pow(this._y+this._height/2-r.center_y,2));return n<t&&(t=n),n<(a?Math.sqrt(Math.pow(this._x+this._width/2-a.center_x,2)+Math.pow(this._y+this._height/2-a.center_y,2)):1/0)?r:a},void 0);return s?{distance:t,nearestEntity:s}:{distance:t,nearestEntity:void 0}}_attack(e){const t=Date.now();t-this._lastAttack>this._attackCountDown&&(e.hurt({x:this.x,y:this.y}),this._lastAttack=t)}_isColliding(e){return e?!(this._x+this._width<e._x||this._x>e._x+e._width||this._y+this._height<e._y||this._y>e._y+e._height):!1}_regenerate(){const e=Date.now();e-this._lastRegeneration>this._regenerationCountDown&&this._lives<this._initialLives&&(this._lives++,this._lastRegeneration=e)}}class I extends p{constructor(t,s,a,r){super();i(this,"_type","bullet");i(this,"_width",24);i(this,"_height",this._width);i(this,"_debugColor","#ff00e8");i(this,"_status","running");i(this,"_initial_x");i(this,"_initial_y");i(this,"_lifeDistance",2e3);i(this,"_speed",10);this._x=t-this._width/2,this._y=s-this._height/2,this._initial_x=this._x,this._initial_y=this._y,this._angle=a,this._speed+=r}move(t){Math.sqrt(Math.pow(this._x+this._width/2-this._initial_x,2)+Math.pow(this._y+this._height/2-this._initial_y,2))>=this._lifeDistance&&(this._status="dead");const{nearestEntity:a}=this._positionOfNearestEntity(t);this._isColliding(a)&&(this._status="dead",this._attack(a)),this._move()}}class E extends p{constructor(){super();i(this,"_debugColor","#49ff00");i(this,"_type","player");i(this,"_x",700);i(this,"_y",200);i(this,"_speed",6);i(this,"_sprintIncrement",1.6);i(this,"_status","freeze");i(this,"_maxBullet",10);i(this,"_bulletsIvoked",[]);i(this,"_lastStatus",this._status);i(this,"_lives",3);i(this,"_width",51);this._lives=this._initialLives}revive(t,s){this._status=this._lastStatus,this._lives=this._initialLives,this._x=t,this._y=s}captureKey(t,s){s=="down"&&t=="KeyW"&&(this._lastStatus="playing"),s=="up"&&t=="KeyW"&&(this._lastStatus="freeze"),t==="ShiftLeft"&&s=="down"&&this._lastStatus==="playing"&&(this._lastStatus="running"),t==="ShiftLeft"&&s=="up"&&this._lastStatus==="running"&&(this._lastStatus="playing"),this.isAlive&&(s=="down"&&t=="KeyW"&&(this._status="playing"),s=="up"&&t=="KeyW"&&(this._status="freeze"),t==="ShiftLeft"&&s=="down"&&this._status==="playing"&&(this._status="running"),t==="ShiftLeft"&&s=="up"&&this._status==="running"&&(this._status="playing"))}calculateAngle(t,s){this._angle=Math.atan2(t.y-(s.y+s.height/2),t.x-(s.x+s.width/2))+1.5708}get bullets(){return this._bulletsIvoked.map(t=>t.data)}shoot(){this._bulletsIvoked.length<this._maxBullet&&this._bulletsIvoked.push(new I(this._x+this._width/2,this._y+this._height/2,this._angle,this._status==="freeze"?0:this.status==="playing"?this._speed:this._speed*this._sprintIncrement))}move(t){this._bulletsIvoked=this._bulletsIvoked.filter(s=>(s.move(t),s.isAlive)),this._move()}get bulletsInstanced(){return this._bulletsIvoked.length}}class m extends p{constructor(){super(...arguments);i(this,"_targetEntity","player");i(this,"_x_center",this._x+this._width/2);i(this,"_y_center",this._y+this._height/2);i(this,"_entityDetectDistance",300);i(this,"_entityDistanceStop",100);i(this,"_status","freeze");i(this,"_calmCountDown",1e3*5);i(this,"_targetRotation",0);i(this,"_lastTimePanicked",-1);i(this,"_isPanicked",!1)}think(t){if(this._status==="dead")return;this._isPanicked=Date.now()-this._lastTimePanicked<this._calmCountDown;const{distance:s,nearestEntity:a}=this._positionOfNearestEntity(t),r=this._isColliding(a);this._isPanicked?this._status="running":s<this._entityDetectDistance&&!r?(this._status="running",this._turn({x:(a==null?void 0:a.x)||0,y:(a==null?void 0:a.y)||0},!1)):r?(this._attack(a),this._status="freeze"):s<=this._entityDistanceStop?this._status="freeze":this._status="iddle",this.iddle(),this._move()}iddle(){this._status==="iddle"&&(Math.abs(this._angle-this._targetRotation)<.009&&(this._targetRotation=m.randomIntFromInterval(-90,90)*(Math.PI/180)+this._angle),this._smoothRotation())}_move(){if(this._isPanicked){this._smoothRotation();const t=this._sprintIncrement;this._sprintIncrement+=this._isPanicked?1:0,super._move(),this._sprintIncrement=t,Math.abs(this._angle-this._targetRotation)<.009&&(this._targetRotation=m.randomIntFromInterval(-90,90)*(Math.PI/180)+this._angle)}else super._move()}_smoothRotation(){this._angle+=(this._targetRotation-this._angle)*.1}static randomIntFromInterval(t,s){return Math.floor(Math.random()*(s-t+1)+t)}hurt(t){super.hurt(),t&&this.status!=="dead"&&this._runAway(t)}_runAway(t){this._lastTimePanicked=Date.now(),this._targetRotation=p.calculateAngleFrom({x:this.x,y:this.y},t,!0),this._status="running"}}class M extends m{constructor(){super(...arguments);i(this,"_debugColor","#fbff00");i(this,"_type","sheep");i(this,"_width",96)}_attack(t){this._regenerate()}}class D extends p{constructor(t,s,a,r){super(t,s,a,r);i(this,"_type","wall");i(this,"_lives",0);i(this,"_debugColor","#3200ff");i(this,"_speed",0);i(this,"_sprintIncrement",1);i(this,"angleToUpperRightCorner");i(this,"angleToUpperLeftCorner");i(this,"angleToLowerRightCorner");i(this,"angleToLowerLeftCorner");const n={x:this.center_x,y:this.center_y},o=p.radToDegreeFixed(p.calculateAngleFrom(n,{x:this._x+this.width,y:this._y}));this.angleToUpperRightCorner=o,this.angleToUpperLeftCorner=360-o,this.angleToLowerRightCorner=180-o,this.angleToLowerLeftCorner=180+o}hurt(){}checkCollision(t){t.forEach(s=>{if(this._isColliding(s)&&s.status!=="freeze"&&s.status!=="dead"){const a=p.radToDegreeFixed(p.calculateAngleFrom({x:this.center_x,y:this.center_y},{x:s.center_x,y:s.center_y})),r=a<this.angleToUpperRightCorner||a>this.angleToUpperLeftCorner,n=a>this.angleToUpperRightCorner&&a<this.angleToLowerRightCorner,o=a>this.angleToLowerRightCorner&&a<this.angleToLowerLeftCorner,l=a>this.angleToLowerLeftCorner&&a<this.angleToUpperLeftCorner;n&&s.x<this.x+this.width&&s.relocate(this.x+this.width,s.y),l&&s.x+s.width>this.x&&s.relocate(this.x-s.width,s.y),r&&s.y+s.height>this.y&&s.relocate(s.x,this.y-s.height),o&&s.y<this.y+this.height&&s.relocate(s.x,this.y+this.height)}})}}class L extends m{constructor(){super(...arguments);i(this,"_debugColor","#ff0000");i(this,"_type","wolf");i(this,"_entityDetectDistance",1e4);i(this,"_width",87)}_runAway(t){}}class P extends m{constructor(){super(...arguments);i(this,"_debugColor","#fbff00");i(this,"_type","cow");i(this,"_width",127);i(this,"_entityDetectDistance",800);i(this,"_speed",4);i(this,"_lives",5);i(this,"_regenerationCountDown",1500)}_attack(t){this._regenerate()}}class R extends m{constructor(){super(...arguments);i(this,"_debugColor","#ff0000");i(this,"_type","rabidWolf");i(this,"_entityDetectDistance",500);i(this,"_speed",6);i(this,"_width",106);i(this,"_lives",4);i(this,"_calmCountDown",500);i(this,"_attackCountDown",500)}}class u{constructor(){i(this,"_sheepList",[]);i(this,"_wolves",[]);i(this,"_obstacules",[]);i(this,"_player");i(this,"_activeBackground",[]);i(this,"_inactiveBackground",[]);i(this,"_playerSpawner",{x:0,y:0,width:0,height:0});i(this,"_enemySpawner",{x:0,y:0,width:0,height:0});i(this,"_animalSpawner",{x:0,y:0,width:0,height:0});console.info("🎭 Initializing the entity manager"),this._player=new E}loadMap(e){if(console.info("🔨 Building a map"),e.obstacles.length<=0||!e.spawner.animals||!e.spawner.enemies||!e.spawner.player)return console.warn(`Apparently your map is not valid.
Please check that you have declared an spawn point for animals, enemies and players and at least one obstacle.`),!1;for(let t of e.backgroundActive)this._activeBackground.push({id:"",x:t.x,y:t.y,width:t.width,height:t.height,color:"purple",type:"backgroundActive",canonical_position:{x:t.x+t.width/2,y:t.y+t.height/2},angle:0,status:"freeze",bullets:void 0,lives:0});for(let t of e.backgroundInactive)this._inactiveBackground.push({id:"",x:t.x,y:t.y,width:t.width,height:t.height,color:"purple",type:"backgroundInactive",canonical_position:{x:t.x+t.width/2,y:t.y+t.height/2},angle:0,status:"freeze",bullets:void 0,lives:0});return e.obstacles.forEach(t=>{this._obstacules.push(new D(t.x,t.y,t.width,t.height))}),this._playerSpawner={x:e.spawner.player.x,y:e.spawner.player.y,width:e.spawner.player.width,height:e.spawner.player.height},this._animalSpawner={x:e.spawner.animals.x,y:e.spawner.animals.y,width:e.spawner.animals.width,height:e.spawner.animals.height},this._enemySpawner={x:e.spawner.enemies.x,y:e.spawner.enemies.y,width:e.spawner.enemies.width,height:e.spawner.enemies.height},this._player.relocate(u.randomIntFromInterval(this._playerSpawner.x,this._playerSpawner.x+this._playerSpawner.width-this._player.width),u.randomIntFromInterval(this._playerSpawner.y,this._playerSpawner.y+this._playerSpawner.height-this._player.height)),!0}static randomIntFromInterval(e,t){return Math.floor(Math.random()*(t-e+1)+e)}static async readMapFromSVG(e){console.info("🗺️ Reading map");const t={obstacles:[],spawner:{},backgroundActive:[],backgroundInactive:[]};if(typeof Document>"u")return console.warn("Oops! If you are using this method inside a Web Worker, it will not work :( Please run it from the main thread and send the event response to the instantiated class of your Web Worker :D"),t;try{const a=await(await fetch(e)).text(),o=new DOMParser().parseFromString(a,"image/svg+xml").querySelectorAll("g");for(let l of o){const c=l.getAttribute("inkscape:label");c==="Background"&&l.querySelectorAll("rect").forEach(h=>{h.getAttribute("inkscape:label")==="Active"?t.backgroundActive.push({x:h.x.baseVal.value,y:h.y.baseVal.value,width:h.width.baseVal.value,height:h.height.baseVal.value}):h.getAttribute("inkscape:label")==="Inactive"&&t.backgroundInactive.push({x:h.x.baseVal.value,y:h.y.baseVal.value,width:h.width.baseVal.value,height:h.height.baseVal.value})}),c==="Walls"&&l.querySelectorAll("rect").forEach(h=>{let _=!1;if(h.transform.baseVal.length>0){let A=h.transform.baseVal.length;for(let v=0;v<A;v++){const w=h.transform.baseVal.getItem(v);w.type===4&&(console.log(w.angle),_=w.angle>45&&w.angle<135||w.angle<-45&&w.angle>-135)}}t.obstacles.push({x:h.x.baseVal.value,y:h.y.baseVal.value,width:_?h.height.baseVal.value:h.width.baseVal.value,height:_?h.width.baseVal.value:h.height.baseVal.value})}),c==="Spawner"&&l.querySelectorAll("rect").forEach(h=>{const _=h.getAttribute("inkscape:label");_==="Player"&&(t.spawner.player={x:h.x.baseVal.value,y:h.y.baseVal.value,width:h.width.baseVal.value,height:h.height.baseVal.value}),_==="Enemies"&&(t.spawner.enemies={x:h.x.baseVal.value,y:h.y.baseVal.value,width:h.width.baseVal.value,height:h.height.baseVal.value}),_==="Animals"&&(t.spawner.animals={x:h.x.baseVal.value,y:h.y.baseVal.value,width:h.width.baseVal.value,height:h.height.baseVal.value})})}return t}catch(s){return console.error("Error al cargar el SVG:",s),t}}bulkInvoke(e){let t=!0;for(let s=0;s<e.length;s++){let a=this._invoke(e[s]);t=t&&a}return t}clearAllEntities(){this._sheepList=[],this._wolves=[]}_invoke(e){if(e.amount<=0)return!1;if(e.type=="sheep"||e.type=="cow"){e.clearQueue&&(this._sheepList=[]);for(let t=0;t<e.amount;t++){const s=e.type==="sheep"?new M:new P;s.relocate(u.randomIntFromInterval(this._animalSpawner.x,this._animalSpawner.x+this._animalSpawner.width-s.width),u.randomIntFromInterval(this._animalSpawner.y,this._animalSpawner.y+this._animalSpawner.height-s.height)),this._sheepList.push(s)}return!0}if(e.type=="wolf"||e.type=="rabidWolf"){e.clearQueue&&(this._wolves=[]);for(let t=0;t<e.amount;t++){const s=e.type==="wolf"?new L:new R;s.relocate(u.randomIntFromInterval(this._enemySpawner.x,this._enemySpawner.x+this._enemySpawner.width-s.width),u.randomIntFromInterval(this._enemySpawner.y,this._enemySpawner.y+this._enemySpawner.height-s.height)),this._wolves.push(s)}return!0}return console.warn(`It was not possible to invoke an entity of the type ${e.type}.`),!1}get data(){return[...this._inactiveBackground,...this._activeBackground,...this._obstacules.map(e=>e.data),...this._wolves.map(e=>e.data),...this._sheepList.map(e=>e.data),...this._player.bullets,this._player.data]}get size(){return this._sheepList.length+this._wolves.length+(this._player?1+this._player.bulletsInstanced:0)+this._obstacules.length}followCursorPlayer(e,t){this._player.calculateAngle(e,t)}captureKey(e,t){this._player.captureKey(e,t)}step(){return this._player.isAlive||this._player.revive(u.randomIntFromInterval(this._playerSpawner.x,this._playerSpawner.x+this._playerSpawner.width-this._player.width),u.randomIntFromInterval(this._playerSpawner.y,this._playerSpawner.y+this._playerSpawner.height-this._player.height)),this._player.move([...this._wolves,...this._obstacules]),this._sheepList=this._sheepList.filter(e=>(e.think([this._player]),e.isAlive)),this._wolves=this._wolves.filter(e=>(e.type==="wolf"?e.think(this._sheepList):e.think([...this._sheepList,this._player]),e.isAlive)),this._obstacules.forEach(e=>e.checkCollision([...this._wolves,...this._sheepList,this._player])),{animalsAlive:this._sheepList.length,enemiesAlive:this._wolves.length,isPlayerAlive:this._player.isAlive}}spawnBullet(){this._player.shoot()}}const F="1.1.0";class y{constructor(e){i(this,"_canvasElement");i(this,"_performancer");i(this,"_context");i(this,"_debug",!1);i(this,"_version",F);i(this,"_appName");i(this,"_entities",[]);i(this,"_entitiesCount");i(this,"_sprites",{generic:void 0,sheep:void 0,wolf:void 0,bullet:void 0,wall:void 0,player:void 0,bubble:void 0,backgroundActive:void 0,backgroundInactive:void 0,cow:void 0,rabidWolf:void 0});console.info("🖼️ Starting rendering engine"),this._canvasElement=document.createElement("canvas"),this._performancer=e.performance,this._debug=e.debug||this._debug,this._context=this._canvasElement.getContext("2d"),this._appName=e.appTitle,this.resize(window.innerWidth-1,window.innerHeight-1),this._inject(e.target,e.backgroundColor),this._changePageTitle(e.appTitle),y.stylize(this._canvasElement,e.backgroundColor),this._loadImages(e.frames).then(()=>{console.log("✅ Assets loaded")}).catch(t=>{console.warn(t)})}_loadImages(e){console.info("📦 Reading assets");const t=Object.entries(e).map(([s,a])=>{if(e)return new Promise((r,n)=>{if(!a||!a.source){n(`The asset "${s}" could not be loaded. The entity may exist and you may be able to interact with it, but it will not be possible to render it.  To see its outline, run the program in debug mode to see its outline.`);return}const o=new Image;o.src=a.source,o.onload=()=>{const l=a.adjustSize??!1,c=a.flipable??!1,f=a.repeat??!1;this._sprites[s]={adjustSize:l,flipable:c,repeat:f,image:o,source:a.source},r()},o.onerror=()=>{r()}})});return Promise.all(t)}static stylize(e,t){e.style.margin="0",e.style.padding="0",e.style.border="none",e.style.outline="0",e.style.display="block",e.style.backgroundColor=t}loop(){console.log("🔄 Starting render loop"),window.requestAnimationFrame(this._renderFrame.bind(this))}render(e,t){this._entities=e,this._entitiesCount=t}resize(e,t){this._canvasElement.width=e,this._canvasElement.height=t}_changePageTitle(e){document.title=e}_inject(e,t){y.stylize(e,t),e.appendChild(this._canvasElement),e.style.backgroundColor=t}_renderFrame(){this._clearScreen(),this._entities.forEach(e=>{this._renderAsSprite(e),this._renderEntityDebugData(e)}),this._renderDebugData(),window.requestAnimationFrame(this._renderFrame.bind(this))}_renderAsSprite(e){e.type=="bubble"&&(this._context.save(),this._context.beginPath(),this._context.fillStyle=e.color,this._context.arc(e.x+e.width/2,e.y+e.height/2,e.width/2,0,360*Math.PI/180),this._context.fill(),this._context.closePath(),this._context.restore());const t=this._sprites[e.type];if(!t||!t.image)return;this._context.save();const s=this._radToDegreeFixed(e.angle);if(t.flipable&&s>0&&s<180)this._context.translate(e.x+t.image.width,e.y),this._context.scale(-1,1),this._context.drawImage(t.image,0,0);else if(!t.repeat)this._context.drawImage(t.image,e.x,e.y,t.adjustSize==="width"||t.adjustSize==="both"?e.width:t.image.width,t.adjustSize==="height"||t.adjustSize==="both"?e.height:t.image.height);else{const a=this._context.createPattern(t.image,"repeat");if(a===null){this._context.restore();return}this._context.fillStyle=a,this._context.translate(e.x,e.y),this._context.fillRect(0,0,e.width,e.height)}this._context.restore(),this._context.save(),(e.type==="player"||e.type==="wolf"||e.type==="sheep"||e.type==="rabidWolf"||e.type==="cow")&&(this._context.textAlign="left",this._drawText("♥ ".repeat(Math.floor(e.lives)).trimEnd(),e.x+10,e.y-20,e.width,"red",10,!0)),this._context.restore()}_renderDebugData(){this._debug&&this._performancer&&this._drawText(`${new Date().toLocaleString("es")}

${this._appName}
${this._performancer.getFPS()} FPS
 v.${this._version}
Rendering: ${this._entities.length}
Computing: ${this._entitiesCount?this._entitiesCount:"N/A"}`)}_renderEntityDebugData(e){this._context.save(),this._debug&&(this._context.strokeStyle=e.color,this._renderGenericEntity(e),e.type!=="bullet"||this._renderBulletDebug(e),this._addDebugInfo(e),this._displayOrientation(e)),this._context.restore()}_displayOrientation(e){this._context.beginPath(),this._context.moveTo(e.x+e.width/2,e.y+e.height/2),this._context.lineTo(e.x+e.width/2+20*Math.sin(e.angle),e.y+e.height/2+20*Math.cos(e.angle-2*(90*Math.PI/180))),this._context.stroke(),this._context.closePath()}_renderBulletDebug(e){this._context.beginPath(),this._context.arc(e.x+e.width/2,e.y+e.height/2,e.width/2,0,2*Math.PI),this._context.stroke(),this._context.closePath()}_renderGenericEntity(e){this._context.strokeRect(e.x,e.y,e.width,e.height)}_addDebugInfo(e){e.type=="bullet"||e.type=="wall"||(this._drawText(`[${e.id}]:[${e.type}]`,e.x-8,e.y+e.height-5,void 0,e.color,10,!1),this._drawText(`[Canonical Pos]
x: ${e.canonical_position.x.toFixed(2)}, y:${e.canonical_position.y.toFixed(2)}
[Render Pos]
x: ${e.x.toFixed(2)}, y:${e.y.toFixed(2)}
Status: ${e.status}
${" ♥".repeat(e.lives)}`,e.x+e.width+3,e.y-10,void 0,e.color,10,!1),this._context.textAlign="right",this._drawText(`[Angle]
${e.angle.toFixed(2)}`,e.x-5,e.y-10,600,e.color,10,!1))}_drawText(e,t=10,s=0,a=600,r="white",n=12,o=!0){this._context.save(),this._context.fillStyle=r,this._context.font=`${o?"bold ":""}${n}px monospace`,e.split(`
`).map((l,c)=>{this._context.fillText(l.trim(),t,s+(12*(c+1)+5),a)}),this._context.restore()}_clearScreen(){this._context.save(),this._context.clearRect(0,0,window.innerWidth,window.innerHeight),this._context.restore()}_radToDegreeFixed(e){let t=e*180/Math.PI;return t=t%360,t<0&&(t+=360),t}}class g{static Notification(e,t,s,a=500,r=!1){const n=document.createElement("div");r&&(n.style.right="0",n.style.textAlign="right"),n.id="notify";const o=document.createElement("h1");o.className="notitle",o.textContent=t;const l=document.createElement("p");l.className="conoti",l.textContent=s,n.appendChild(o),n.appendChild(l),e.appendChild(n),setTimeout(()=>{n.remove()},a)}static StatisticsScreen(e,t){const s=document.createElement("div");s.id="statistics";const a=document.createElement("h1");a.className="statitle";const r={rounds:"Rounds",timesDeath:"Times dead",sheepSaved:"Animals Saved",sheepKilled:"Animals Killed",wolfKilled:"Wild Animals Killed",timePlayingInSecond:"Time played",score:"Score"};a.textContent="Game Over",s.appendChild(a);for(let o of Object.keys(t)){const l=document.createElement("p");let c=t[o];o==="timePlayingInSecond"&&(c=`${Math.round(c/60).toString().padStart(2,"0")}:${Math.floor(c%60).toString().padStart(2,"0")}`),o==="sheepKilled"&&(c=Math.floor(c)),l.innerHTML=`<b>${r[o]}</b>: ${c}`,s.appendChild(l)}const n=document.createElement("button");n.id="restart",n.textContent="Play again",n.onclick=()=>{window.location.reload()},s.appendChild(n),e.appendChild(s)}}class T{constructor(e){i(this,"_frame",0);i(this,"_lastRender",performance.now());i(this,"_fps",this._frame);i(this,"_fixedTo",0);this._fixedTo=e.fixedTo}getFPS(){return this._frame++,performance.now()-this._lastRender>1e3&&(this._fps=this._frame/((performance.now()-this._lastRender)/1e3),this._frame=0,this._lastRender=performance.now()),this._fps.toFixed(this._fixedTo)}}const W="/Sheep-Shielding/assets/player-DHNI1j3e.png",B="/Sheep-Shielding/assets/sheep-DMat4ZYW.png",V="/Sheep-Shielding/assets/wolf-A49DWjmR.png",z="/Sheep-Shielding/assets/cow-B8QyfzJO.png",j="/Sheep-Shielding/assets/rabidWolf-DAXGeqp_.png",H="/Sheep-Shielding/assets/rock-Be6R4D3u.png",K="data:image/png;base64,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",Y="/Sheep-Shielding/assets/rocks-CVd0QjYS.jpg",N="/Sheep-Shielding/assets/sand-B2-JjcG7.png",U="/Sheep-Shielding/assets/map-CLNceVAs.svg",x=U,b={appTitle:"Sheep Shielding",backgroundColor:"black",target:document.getElementById("game"),performance:new T({fixedTo:2}),debug:!1,frames:{player:{adjustSize:"none",flipable:!0,repeat:!1,source:W},generic:void 0,bubble:void 0,sheep:{adjustSize:"none",flipable:!0,repeat:!1,source:B},wolf:{adjustSize:"both",flipable:!0,repeat:!1,source:V},bullet:{adjustSize:"both",flipable:!1,repeat:!1,source:H},wall:{adjustSize:"none",flipable:!1,repeat:!0,source:Y},backgroundActive:{adjustSize:"none",flipable:!1,repeat:!0,source:K},backgroundInactive:{adjustSize:"none",flipable:!1,repeat:!0,source:N},cow:{adjustSize:"none",flipable:!0,repeat:!1,source:z},rabidWolf:{adjustSize:"none",flipable:!0,repeat:!1,source:j}}};function G(d){const e=new y(b);e.loop();const t={camera:new Worker(new URL("/Sheep-Shielding/assets/CameraWorker-CyQozVtG.js",import.meta.url),{type:"module",name:"Camera"}),entityManager:new Worker(new URL("/Sheep-Shielding/assets/EntityManagerWorker-B5cm0MqK.js",import.meta.url),{type:"module",name:"Entity Manager"}),gameManager:new Worker(new URL("/Sheep-Shielding/assets/GameManagerWorker-wXHGcYfa.js",import.meta.url),{type:"module",name:"Game Manager"})};(()=>{const o={width:window.innerWidth-1,height:window.innerHeight-1};t.camera.postMessage({type:"resize",dimension:o})})(),u.readMapFromSVG(x).then(o=>{t.entityManager.postMessage({type:"loadmap",params:[o]}),t.gameManager.postMessage({type:"invoke",params:[!0]})}),t.gameManager.onmessage=o=>{const{type:l,params:c}=o.data;l==="round"&&(g.Notification(d,`Round ${c[1]}`,"A new round has started!",1500,!0),t.entityManager.postMessage({type:"bulkInvoke",params:[c[0]]})),l==="lost"&&(t.entityManager.postMessage({type:"clear",params:[]}),g.StatisticsScreen(d,c[0]))},t.entityManager.onmessage=o=>{const{type:l,params:c}=o.data;l==="tick"&&(t.camera.postMessage({type:"renderFrame",params:[c[0],c[1]]}),t.gameManager.postMessage({type:"update",params:[c[2]]})),l==="invoked"&&t.gameManager.postMessage({type:"ready",params:[]})},t.camera.onmessage=o=>{o.data.type==="render"&&e.render(o.data.params[0],o.data.params[1])};const a=()=>{const o={width:window.innerWidth-1,height:window.innerHeight-1};e.resize(o.width,o.height),t.camera.postMessage({type:"resize",dimension:o})},r=o=>{t.entityManager.postMessage({type:"mousemove",params:[{x:o.clientX,y:o.clientY},{height:window.innerHeight,width:window.innerWidth,x:0,y:0}]})},n=(o,l)=>{t.entityManager.postMessage({type:"key",params:[o.code,l]})};window.addEventListener("resize",a),window.addEventListener("mousemove",r),window.addEventListener("keydown",o=>n(o,"down")),window.addEventListener("keyup",o=>n(o,"up")),window.addEventListener("click",()=>t.entityManager.postMessage({type:"click",params:void 0}))}class O{constructor(){i(this,"_initialAnimalCount",5);i(this,"_initialEnemyCount",1);i(this,"_currentAnimalAlive",0);i(this,"_incrementEnemyByRound",1.3);i(this,"_incrementAnimalByRound",.2);i(this,"_cowSpawnRelation",.2);i(this,"_rabidWolfSpawnRelation",.2);i(this,"_timesDeath",0);i(this,"_roundCount",1);i(this,"_sheepSaved",0);i(this,"_sheepKilled",0);i(this,"_wolfKilled",0);i(this,"_startPlayAt",Date.now());i(this,"_started",!1);i(this,"_status","in-progress");console.info("🕹️ Creating a new game")}set ready(e){this._started=e}get round(){return this._roundCount}invokeCurrentEnemies(e){const t=[],s=Math.round((Math.round(this._initialAnimalCount)-this._currentAnimalAlive)*this._cowSpawnRelation),a=Math.round(Math.round(this._initialEnemyCount)*this._rabidWolfSpawnRelation);return t.push({type:"sheep",amount:Math.round(this._initialAnimalCount)-this._currentAnimalAlive-s,clearQueue:e}),t.push({type:"wolf",amount:Math.round(this._initialEnemyCount)-a,clearQueue:e}),t.push({type:"cow",amount:s,clearQueue:!1}),t.push({type:"rabidWolf",amount:a,clearQueue:!1}),t}updateMatchStatus(e){return this._status==="lost"||!this._started?!1:(e.isPlayerAlive||this._timesDeath++,e.animalsAlive<=0?(this._status="lost",this._sheepKilled+=this._initialAnimalCount-this._currentAnimalAlive,this._wolfKilled+=Math.round(this._initialEnemyCount)-e.enemiesAlive,!0):e.enemiesAlive<=0?(this._roundCount++,this._sheepKilled+=this._initialAnimalCount-this._currentAnimalAlive,this._sheepSaved+=e.animalsAlive,this._wolfKilled+=Math.round(this._initialEnemyCount),this._currentAnimalAlive=e.animalsAlive,this._initialEnemyCount+=this._incrementEnemyByRound,this._initialAnimalCount+=this._incrementAnimalByRound,!0):!1)}get isLost(){return this._status==="lost"}get resume(){const e=(Date.now()-this._startPlayAt)/1e3;return{rounds:this._roundCount,timesDeath:this._timesDeath,sheepKilled:this._sheepKilled,sheepSaved:this._sheepSaved,wolfKilled:this._wolfKilled,timePlayingInSecond:e,score:this._roundCount*1e3+this._sheepSaved*200+this._wolfKilled*100+Math.round(e)}}}class Q{constructor(e,t,s){i(this,"_width");i(this,"_height");i(this,"_followingType");console.info("🎥 Creating a new camera"),this._width=e,this._height=t,this._followingType=s}capture(e){const t=this._findFollowingEntity(e),s=t.x+t.width/2-this._width/2,a=t.y+t.height/2-this._height/2,r={left:t.x+t.width/2-this._width/2,right:t.x+t.width/2+this._width/2,top:t.y+t.height/2-this._height/2,bottom:t.y+t.height/2+this._height/2};return e.map(n=>{if(!(r.right<n.x||r.left>n.x+n.width||r.bottom<n.y||r.top>n.y+n.height))return{...n,x:n.x-s,y:n.y-a};if(n.type==="wall"||n.type==="bullet"||n.type==="backgroundActive"||n.type==="backgroundInactive"||n.type==="generic")return null;const l=25,c=5;return{id:n.id,x:n.x>r.right?r.right-l-s-c:n.x<r.left-l?r.left-s+c:n.x+n.width/2-s,y:n.y>r.bottom?r.bottom-l-a-c:n.y<r.top-l?r.top-a+c:n.y+n.height/2-a,width:l,height:l,color:n.color,type:"bubble",canonical_position:{x:0,y:0},angle:0,status:"freeze",lives:0}}).filter(n=>n!==null)}resize(e,t){this._width=e,this._height=t}_findFollowingEntity(e){for(let t of e)if(t.type===this._followingType)return t;return e[e.length-1]}}function X(d){const e=new y(b),t=new Q(window.innerWidth-1,window.innerHeight-1,"player"),s=new u,a=new O;u.readMapFromSVG(x).then(n=>{s.loadMap(n),s.bulkInvoke(a.invokeCurrentEnemies(!0)),a.ready=!0,g.Notification(d,"Round 1","A new round has started!",1500,!0),requestAnimationFrame(r)}),e.loop();function r(){const n=s.step();e.render(t.capture(s.data),s.size),a.updateMatchStatus(n)&&(a.isLost?(s.clearAllEntities(),g.StatisticsScreen(d,a.resume)):(s.bulkInvoke(a.invokeCurrentEnemies(!1)),g.Notification(d,`Round ${a.resume.rounds}`,"A new round has started!",1500,!0))),requestAnimationFrame(r)}window.addEventListener("resize",()=>{e.resize(window.innerWidth-1,window.innerHeight-1),t.resize(window.innerWidth-1,window.innerHeight-1)}),window.addEventListener("mousemove",n=>{s.followCursorPlayer({x:n.clientX,y:n.clientY},{height:window.innerHeight,width:window.innerWidth,x:0,y:0})}),window.addEventListener("keydown",n=>{s.captureKey(n.code,"down")}),window.addEventListener("keyup",n=>{s.captureKey(n.code,"up")}),window.addEventListener("click",()=>{s.spawnBullet()})}const S=document.getElementById("startGame");if(!S)throw alert("Apparently the target element for the game could not be found."),new Error("Apparently the target element for the game could not be found.");function J(){let d=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(d=!0)}(navigator.userAgent||navigator.vendor),d}S.onclick=d=>{const e=document.getElementById("game");if(J()){const t=d.target;throw t!==null&&(t.disabled=!0),g.Notification(e,"We are so sorry!","This game is best played on desktop.",1e3*5),new Error("Sorry, the game can only be used on desktop.")}e.innerHTML="",window.Worker?G(e):(g.Notification(e,"Web Worker Not Supported","Your browser does not support Web Worker. Launching program in single thread",1e3*5),console.warn("Your browser does not support Web Worker. Launching program in single thread"),X(e))};
